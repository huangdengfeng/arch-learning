import{_ as d,M as a,p as r,q as v,R as i,t as n,N as s,a1 as l}from"./framework-a44ba987.js";const u={},g={href:"https://maven.apache.org/shared/maven-archiver/examples/classpath.html#Make",target:"_blank",rel:"noopener noreferrer"},c={href:"https://maven.apache.org/shared/maven-archiver/examples/classpath.html#Prefix",target:"_blank",rel:"noopener noreferrer"},m={href:"https://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-project-dependencies.html#",target:"_blank",rel:"noopener noreferrer"},o={href:"http://maven.apache.org/plugins/maven-assembly-plugin/usage.html",target:"_blank",rel:"noopener noreferrer"};function b(p,e){const t=a("ExternalLinkIcon");return r(),v("div",null,[e[12]||(e[12]=i("h1",{id:"常用打包插件",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#常用打包插件","aria-hidden":"true"},"#"),n(" 常用打包插件")],-1)),e[13]||(e[13]=i("h2",{id:"maven-jar-plugin使用",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#maven-jar-plugin使用","aria-hidden":"true"},"#"),n(" maven-jar-plugin使用")],-1)),e[14]||(e[14]=i("p",null,[i("strong",null,"该插件不会处理依赖包"),n("，只会将依赖包放入"),i("code",null,"manifest Classpath"),n("中.")],-1)),e[15]||(e[15]=i("ul",null,[i("li",null,"无依赖时候可执行jar")],-1)),i("blockquote",null,[i("p",null,[e[1]||(e[1]=n("参考网址")),i("a",g,[e[0]||(e[0]=n("https://maven.apache.org/shared/maven-archiver/examples/classpath.html#Make")),s(t)])])]),e[16]||(e[16]=l(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
        ...
        &lt;configuration&gt;
          &lt;archive&gt;
            &lt;manifest&gt;
              &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;
            &lt;/manifest&gt;
          &lt;/archive&gt;
        &lt;/configuration&gt;
        ...
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),i("ul",null,[i("li",null,[e[4]||(e[4]=i("p",null,[n("有依赖的可执行jar，"),i("strong",null,[n("依赖"),i("code",null,"maven-dependency-plugin")]),n("，将依赖包copy 到平级的lib目录，如果目录层级不通可以调整"),i("code",null,"classpathPrefix"),n(".")],-1)),i("blockquote",null,[i("p",null,[e[3]||(e[3]=n("参考网址")),i("a",c,[e[2]||(e[2]=n("https://maven.apache.org/shared/maven-archiver/examples/classpath.html#Prefix")),s(t)])])]),e[5]||(e[5]=l(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;project&gt;
  ...
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
      	&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
         &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
         &lt;configuration&gt;
           &lt;archive&gt;
             &lt;manifest&gt;
               &lt;addClasspath&gt;true&lt;/addClasspath&gt;
               &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;
               &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;
             &lt;/manifest&gt;
           &lt;/archive&gt;
         &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-lang&lt;/groupId&gt;
      &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;
      &lt;version&gt;2.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
      &lt;artifactId&gt;plexus-utils&lt;/artifactId&gt;
      &lt;version&gt;1.1&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1))])]),e[17]||(e[17]=i("h2",{id:"maven-dependency-plugin-使用",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#maven-dependency-plugin-使用","aria-hidden":"true"},"#"),n(" maven-dependency-plugin 使用")],-1)),i("p",null,[e[7]||(e[7]=n("主要需要用copy-dependency的功能，参考")),i("a",m,[e[6]||(e[6]=n("https://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-project-dependencies.html#")),s(t)])]),e[18]||(e[18]=l(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;project&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.1.2&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;id&gt;copy-dependencies&lt;/id&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;copy-dependencies&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;outputDirectory&gt;\${project.build.directory}/lib&lt;/outputDirectory&gt;
              &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;
              &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;
              &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="maven-assembly-plugin-打包可执行jar" tabindex="-1"><a class="header-anchor" href="#maven-assembly-plugin-打包可执行jar" aria-hidden="true">#</a> maven-assembly-plugin 打包可执行jar</h2><p>该插件有两种主流打包方式：</p>`,3)),i("ul",null,[i("li",null,[i("p",null,[e[9]||(e[9]=n("依赖包打到产出物里面，参考")),i("a",o,[e[8]||(e[8]=n("http://maven.apache.org/plugins/maven-assembly-plugin/usage.html")),s(t)])]),e[10]||(e[10]=l(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;project&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
     	&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.3.0&lt;/version&gt;
        &lt;configuration&gt;
           &lt;archive&gt;
                &lt;manifest&gt;
                  &lt;mainClass&gt;org.sample.App&lt;/mainClass&gt;
                &lt;/manifest&gt;
            &lt;/archive&gt;
          &lt;descriptorRefs&gt;
            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;
          &lt;/descriptorRefs&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;id&gt;make-assembly&lt;/id&gt; &lt;!-- this is used for inheritance merges --&gt;
            &lt;phase&gt;package&lt;/phase&gt; &lt;!-- bind to the packaging phase --&gt;
            &lt;goals&gt;
              &lt;goal&gt;single&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/project&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1))]),e[11]||(e[11]=l(`<li><p>打包成具有目录结构的压缩包</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;!-- 打包成结构化的包 --&gt;
&lt;plugin&gt;
	&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
	&lt;configuration&gt;
        &lt;attach&gt;false&lt;/attach&gt;
        &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;
        &lt;descriptors&gt;
            &lt;descriptor&gt;
            \${project.parent.basedir}/build/assembly/assembly.xml
            &lt;/descriptor&gt;
        &lt;/descriptors&gt;
	&lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-assembly&lt;/id&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
            	&lt;goal&gt;single&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 常用assembly.xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;assembly&gt;
    &lt;!-- 可自定义，这里指定的是项目环境 --&gt;
    &lt;id&gt;release&lt;/id&gt;

    &lt;!-- 打包的类型，如果有N个，将会打N个类型的包 --&gt;
    &lt;formats&gt;
        &lt;format&gt;tar.gz&lt;/format&gt;
        &lt;format&gt;dir&lt;/format&gt;
    &lt;/formats&gt;

    &lt;includeBaseDirectory&gt;true&lt;/includeBaseDirectory&gt;
       &lt;!--第三方依赖设置 可以配合jar plugin classpathPrefix--&gt;
      &lt;dependencySets&gt;
          &lt;dependencySet&gt;
              &lt;!-- 不使用项目的artifact，第三方jar不要解压，打包进zip文件的lib目录 --&gt;
              &lt;useProjectArtifact&gt;false&lt;/useProjectArtifact&gt;
              &lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;
              &lt;unpack&gt;false&lt;/unpack&gt;
          &lt;/dependencySet&gt;
      &lt;/dependencySets&gt;
    &lt;fileSets&gt;
        &lt;!--
            0755-&gt;即用户具有读/写/执行权限，组用户和其它用户具有读写权限；
            0644-&gt;即用户具有读写权限，组用户和其它用户具有只读权限；
            include 通配符说明 ** 任意目录(可以多级)，*为名称，eg:**/*.xml
        --&gt;
        &lt;!-- 将src/main/assembly/bin目录下的所有文件输出到打包后的bin目录中 --&gt;
        &lt;fileSet&gt;
            &lt;directory&gt;\${project.parent.basedir}/build/assembly/bin&lt;/directory&gt;
            &lt;outputDirectory&gt;bin&lt;/outputDirectory&gt;
            &lt;fileMode&gt;0755&lt;/fileMode&gt;
            &lt;includes&gt;
                &lt;include&gt;*.sh&lt;/include&gt;
            &lt;/includes&gt;
        &lt;/fileSet&gt;
        &lt;!-- 基本配置文件 --&gt;
        &lt;fileSet&gt;
            &lt;directory&gt;\${project.parent.basedir}/build/assembly/conf&lt;/directory&gt;
            &lt;outputDirectory&gt;conf&lt;/outputDirectory&gt;
            &lt;fileMode&gt;0644&lt;/fileMode&gt;
        &lt;/fileSet&gt;
        &lt;!-- log 目录 --&gt;
        &lt;fileSet&gt;
            &lt;directory&gt;\${project.parent.basedir}/build/assembly/logs&lt;/directory&gt;
            &lt;outputDirectory&gt;logs&lt;/outputDirectory&gt;
            &lt;fileMode&gt;0644&lt;/fileMode&gt;
        &lt;/fileSet&gt;

        &lt;!-- 将项目启动jar打包到boot目录中 --&gt;
        &lt;fileSet&gt;
            &lt;directory&gt;\${basedir}/target&lt;/directory&gt;
            &lt;outputDirectory&gt;bin&lt;/outputDirectory&gt;
            &lt;fileMode&gt;0755&lt;/fileMode&gt;
            &lt;includes&gt;
                &lt;include&gt;\${project.build.finalName}.jar&lt;/include&gt;
            &lt;/includes&gt;
        &lt;/fileSet&gt;
    &lt;/fileSets&gt;
&lt;/assembly&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,1))]),e[19]||(e[19]=l(`<h2 id="maven-antrun-plugin-打包出指定目录结构" tabindex="-1"><a class="header-anchor" href="#maven-antrun-plugin-打包出指定目录结构" aria-hidden="true">#</a> maven-antrun-plugin 打包出指定目录结构</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> &lt;plugin&gt;
              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
              &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;
              &lt;executions&gt;
                  &lt;execution&gt;
                      &lt;id&gt;copy-to-package-main&lt;/id&gt;
                      &lt;phase&gt;package&lt;/phase&gt;
                      &lt;configuration&gt;
                          &lt;tasks&gt;
                              &lt;copy todir=&quot;target/package/main/bin&quot;&gt;
                                  &lt;fileset dir=&quot;target/&quot;&gt;
                                      &lt;include name=&quot;*.jar&quot;&gt;&lt;/include&gt;
                                  &lt;/fileset&gt;
                                  &lt;fileset dir=&quot;bin/&quot;&gt;
                                      &lt;include name=&quot;*.sh&quot;&gt;&lt;/include&gt;
                                  &lt;/fileset&gt;
                              &lt;/copy&gt;
                              &lt;copy todir=&quot;target/package/conf&quot;&gt;
                                  &lt;fileset dir=&quot;src/main/resources&quot;&gt;
                                      &lt;include name=&quot;application.properties&quot;&gt;&lt;/include&gt;
                                      &lt;include name=&quot;spring-logback.xml&quot;&gt;&lt;/include&gt;
                                  &lt;/fileset&gt;
                              &lt;/copy&gt;
                              &lt;chmod dir=&quot;target/package/main/bin&quot; perm=&quot;755&quot;
                                      includes=&quot;**/*.sh&quot;/&gt;
                          &lt;/tasks&gt;
                      &lt;/configuration&gt;
                      &lt;goals&gt;
                          &lt;goal&gt;run&lt;/goal&gt;
                      &lt;/goals&gt;
                  &lt;/execution&gt;
              &lt;/executions&gt;
          &lt;/plugin&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2))])}const h=d(u,[["render",b],["__file","maven.html.vue"]]);export{h as default};
